From b7c7c3ea4dbcf52993f4f98c6013f2133dcb993d Mon Sep 17 00:00:00 2001
From: Jani Nikula <jani.nikula@intel.com>
Date: Fri, 25 Aug 2017 17:11:22 +0300
Subject: [PATCH] drm/i915/bios: amend child device flags based on intel_vbt_decode
Mime-version: 1.0
Content-type: text/plain; charset=UTF-8
Content-transfer-encoding: 8bit
Git-commit: b7c7c3ea4dbcf52993f4f98c6013f2133dcb993d
Patch-mainline: v4.15-rc1
References: FATE#322643 bsc#1055900

Copy over some fields defined in the intel_vbt_decode tool. No
functional changes.

Cc: Ville Syrj채l채 <ville.syrjala@linux.intel.com>
Reviewed-by: Ville Syrj채l채 <ville.syrjala@linux.intel.com>
Signed-off-by: Jani Nikula <jani.nikula@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/bce6907fa24d80643b33d58091d7675ff3b4f30e.1503670197.git.jani.nikula@intel.com
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/gpu/drm/i915/intel_vbt_defs.h |    9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

--- a/drivers/gpu/drm/i915/intel_vbt_defs.h
+++ b/drivers/gpu/drm/i915/intel_vbt_defs.h
@@ -380,7 +380,11 @@ struct child_device_config {
 		} __packed;
 	} __packed;
 
-	u8 capabilities;
+	u8 pipe_cap:2;
+	u8 sdvo_stall:1;					/* 158 */
+	u8 hpd_status:2;
+	u8 integrated_encoder:1;
+	u8 capabilities_reserved:2;
 	u8 dvo_wiring; /* See DEVICE_WIRE_* above */
 
 	union {
@@ -390,7 +394,8 @@ struct child_device_config {
 
 	u16 extended_type;
 	u8 dvo_function;
-	u8 flags2;						/* 195 */
+	u8 dp_usb_type_c:1;					/* 195 */
+	u8 flags2_reserved:7;					/* 195 */
 	u8 dp_gpio_index;					/* 195 */
 	u16 dp_gpio_pin_num;					/* 195 */
 	u8 dp_iboost_level:4;					/* 196 */
