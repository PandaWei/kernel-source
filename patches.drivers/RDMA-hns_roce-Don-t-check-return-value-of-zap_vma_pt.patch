From: Doug Ledford <dledford@redhat.com>
Date: Fri, 1 Jun 2018 11:19:19 -0400
Subject: RDMA/hns_roce: Don't check return value of zap_vma_ptes()
Patch-mainline: v4.18-rc1
Git-commit: 008fba465d7c010dc14c9d7fd57a7a743d50bf8e
References: bsc#1104427 FATE#326416

There is no need to check return value of zap_vma_ptes()
because there is nothing to do with this knowledge.

Signed-off-by: Doug Ledford <dledford@redhat.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/infiniband/hw/hns/hns_roce_main.c |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

--- a/drivers/infiniband/hw/hns/hns_roce_main.c
+++ b/drivers/infiniband/hw/hns/hns_roce_main.c
@@ -483,13 +483,11 @@ static void hns_roce_disassociate_uconte
 	struct hns_roce_ucontext *context = to_hr_ucontext(ibcontext);
 	struct hns_roce_vma_data *vma_data, *n;
 	struct vm_area_struct *vma;
-	int ret;
 
 	mutex_lock(&context->vma_list_mutex);
 	list_for_each_entry_safe(vma_data, n, &context->vma_list, list) {
 		vma = vma_data->vma;
-		ret = zap_vma_ptes(vma, vma->vm_start, PAGE_SIZE);
-		WARN_ONCE(ret, "%s: zap_vma_ptes failed", __func__);
+		zap_vma_ptes(vma, vma->vm_start, PAGE_SIZE);
 
 		vma->vm_flags &= ~(VM_SHARED | VM_MAYSHARE);
 		vma->vm_ops = NULL;
