From ecca790a1aabd4a0e6fcdf7c3a0c81f3a4f38b6a Mon Sep 17 00:00:00 2001
From: Stefan Agner <stefan@agner.ch>
Date: Mon, 15 May 2017 23:24:11 -0700
Subject: [PATCH] mfd: rn5t618: Unregister restart handler on remove
Git-commit: ecca790a1aabd4a0e6fcdf7c3a0c81f3a4f38b6a
Patch-mainline: v4.13-rc1
References: bsc#1051510

Remove the restart handler registered in probe on device remove.

Fixes: a370f60a58ec ("mfd: rn5t618: Register restart handler")
Signed-off-by: Stefan Agner <stefan@agner.ch>
Signed-off-by: Lee Jones <lee.jones@linaro.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/mfd/rn5t618.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/drivers/mfd/rn5t618.c
+++ b/drivers/mfd/rn5t618.c
@@ -155,6 +155,8 @@ static int rn5t618_i2c_remove(struct i2c
 		pm_power_off = NULL;
 	}
 
+	unregister_restart_handler(&rn5t618_restart_handler);
+
 	return 0;
 }
 
