From 208f07ad4c37238926913980ba4077bc6102a190 Mon Sep 17 00:00:00 2001
From: Michal Suchanek <msuchanek@suse.de>
Date: Mon, 2 Jul 2018 19:01:46 +0200
Subject: [PATCH 14/24] powerpc: cputable: KABI - hide new cpu_spec member from
 genksyms

References: bsc#1094244
Patch-mainline: never, KABI

breaks cur_cpu_spec symbol

Signed-off-by: Michal Suchanek <msuchanek@suse.de>
---
 arch/powerpc/include/asm/cputable.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/include/asm/cputable.h b/arch/powerpc/include/asm/cputable.h
index 0e5e99860538..8c0ed4b8c381 100644
--- a/arch/powerpc/include/asm/cputable.h
+++ b/arch/powerpc/include/asm/cputable.h
@@ -132,13 +132,13 @@ struct cpu_spec {
 	 * if the error is fatal, 1 if it was fully recovered and 0 to
 	 * pass up (not CPU originated) */
 	int		(*machine_check)(struct pt_regs *regs);
-
+#ifndef __GENKSYMS__
 	/*
 	 * Processor specific early machine check handler which is
 	 * called in real mode to handle SLB and TLB errors.
 	 */
 	long		(*machine_check_early)(struct pt_regs *regs);
-
+#endif
 };
 
 extern struct cpu_spec		*cur_cpu_spec;
-- 
2.13.7

