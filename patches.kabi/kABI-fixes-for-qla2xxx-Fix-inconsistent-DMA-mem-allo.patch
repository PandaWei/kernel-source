From: Hannes Reinecke <hare@suse.de>
Date: Mon, 30 Jul 2018 13:31:05 +0200
Subject: [PATCH] kABI fixes for qla2xxx-Fix-inconsistent-DMA-mem-alloc-free.patch
References: bsc#1077989
Patch-Mainline: never, kABI fix for SLE15

Signed-off-by: Hannes Reinecke <hare@suse.com>
---
 drivers/scsi/qla2xxx/qla_def.h | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/drivers/scsi/qla2xxx/qla_def.h b/drivers/scsi/qla2xxx/qla_def.h
index 209de7cd9358..5c433b3d728f 100644
--- a/drivers/scsi/qla2xxx/qla_def.h
+++ b/drivers/scsi/qla2xxx/qla_def.h
@@ -361,11 +361,13 @@ struct ct_arg {
 	dma_addr_t	rsp_dma;
 	u32		req_size;
 	u32		rsp_size;
-	u32		req_allocated_size;
-	u32		rsp_allocated_size;
 	void		*req;
 	void		*rsp;
 	port_id_t	id;
+#ifndef __GENKSYMS__
+	u32		req_allocated_size;
+	u32		rsp_allocated_size;
+#endif
 };
 
 /*
-- 
2.12.3

